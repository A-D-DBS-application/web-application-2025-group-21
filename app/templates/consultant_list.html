{% extends "base.html" %}
{% block title %}Consultants{% endblock %}

{% block content %}
  <h1>Consultants</h1>

  <form method="GET" action="{{ url_for('main.consultants_list') }}" class="filter-form">
    <input type="text" name="q" placeholder="Zoek..." value="{{ request.args.get('q', '') }}">
    <input type="text" name="city" placeholder="Stad" value="{{ request.args.get('city', '') }}">
    <input type="text" name="country" placeholder="Land" value="{{ request.args.get('country', '') }}">

    <div class="skills-filter">
      <label>Skills:</label>
      <div class="skills-checkboxes">
        {% for skill in skills %}
          <label class="skill-label">
            <input type="checkbox" name="skills" value="{{ skill.id }}"
              {% if request.args.getlist('skills') and skill.id|string in request.args.getlist('skills') %}checked{% endif %}>
            {{ skill.name }}
          </label>
        {% endfor %}
      </div>
    </div>

    <button type="submit" class="btn btn-secondary">Filter</button>
  </form>
  <div class="row">
    {% for p in profiles %}
      <div class="card grow">
        <h3>{{ p.display_name_masked }}</h3>
        {% if p.headline %}<p>{{ p.headline }}</p>{% endif %}
        {% if p.location_city or p.country %}
          <p><small>{{ p.location_city }}{% if p.location_city and p.country %}, {% endif %}{{ p.country }}</small></p>
        {% endif %}
        <a class="btn" href="{{ url_for('main.consultant_detail', profile_id=p.id) }}">Bekijk</a>
      </div>
    {% endfor %}
    {% if not profiles %}
      <p>No consultants found.</p>
    {% endif %}
  </div>

{% endblock %}
