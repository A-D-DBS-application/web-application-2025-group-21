{% extends "base.html" %}
{% block title %}Jobs{% endblock %}
{% block content %}

<h1 class="page-title">Job Posts</h1>

{% if user and user.role == 'company' %}
  <a class="btn btn-primary" href="{{ url_for('main.job_new') }}">Nieuwe job</a>
{% endif %}

<!-- FILTER FORMULIER -->
<form method="GET" action="{{ url_for('main.jobs_list') }}" class="filter-form">
  <input type="text" name="q" placeholder="Zoek..." value="{{ request.args.get('q', '') }}">
  <input type="text" name="city" placeholder="Stad" value="{{ request.args.get('city', '') }}">
  <input type="text" name="country" placeholder="Land" value="{{ request.args.get('country', '') }}">
  <input type="text" name="contract_type" placeholder="Contract type" value="{{ request.args.get('contract_type', '') }}">

  <div class="skills-filter">
    <label>Skills:</label>
    <div class="skills-checkboxes">
      {% for skill in skills %}
        <label class="skill-label">
          <input type="checkbox" name="skills" value="{{ skill.id }}"
            {% if request.args.getlist('skills') and skill.id|string in request.args.getlist('skills') %}checked{% endif %}>
          {{ skill.name }}
        </label>
      {% endfor %}
    </div>
  </div>

  <button type="submit" class="btn btn-secondary">Filter</button>
</form>

<div class="job-grid">
  {% for j in jobs %}
    <div class="job-card">
      <h3><a href="{{ url_for('main.job_detail', job_id=j.id) }}">{{ j.title }}</a></h3>

      {% if j.location_city or j.country %}
        <p class="job-location">
          {{ j.location_city }}{% if j.location_city and j.country %}, {% endif %}{{ j.country }}
        </p>
      {% endif %}

      <a class="btn btn-secondary" href="{{ url_for('main.job_detail', job_id=j.id) }}">Bekijk</a>
    </div>
  {% endfor %}
</div>

{% if not jobs %}
  <p>Geen jobs beschikbaar.</p>
{% endif %}

<style>
  .page-title {
    margin-bottom: 20px;
  }

  .filter-form {
    margin-bottom: 20px;
    padding: 12px;
    border: 1px solid #dce6f5;
    border-radius: 12px;
    background: #f9fafe;
  }

  .filter-form input[type="text"] {
    margin: 4px 6px 10px 0;
    padding: 6px;
    border-radius: 6px;
    border: 1px solid #bcd0ff;
  }

  .skills-filter {
    margin: 8px 0;
  }

  .skills-checkboxes {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .skill-label {
    display: flex;
    align-items: center;
    background: #e9f0ff;
    border: 1px solid #bcd0ff;
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 0.9rem;
  }

  .job-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 16px;
  }

  .job-card {
    background: #ffffff;
    border: 1px solid #dce6f5;
    border-radius: 12px;
    padding: 16px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }

  .job-card h3 {
    margin: 0 0 6px;
  }

  .job-location {
    font-size: 0.9rem;
    color: #4a6fa1;
    margin: 6px 0 12px;
  }

  .btn-primary {
    background: #2b63c6;
    color: white;
    padding: 8px 12px;
    border-radius: 8px;
    text-decoration: none;
    display: inline-block;
    margin-bottom: 16px;
  }

  .btn-secondary {
    background: #e9f0ff;
    border: 1px solid #bcd0ff;
    padding: 6px 10px;
    border-radius: 8px;
    text-decoration: none;
    color: #2b63c6;
  }
</style>

{% endblock %}
