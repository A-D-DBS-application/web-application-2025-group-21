{% extends "base.html" %}
{% block title %}Edit Company Profile{% endblock %}

{% block content %}
<h1>Edit company profile</h1>

<form method="post" class="company-form">

    <!-- COMPANY NAME -->
    <label class="field-label">
        Company name:
        <input
            type="text"
            id="company_name"
            name="company_name"
            value="{{ company.company_name_masked or '' }}"
            required
        >
    </label>

    <!-- CITY -->
    <label class="field-label">
        City:
        <input
            type="text"
            id="location_city"
            name="location_city"
            value="{{ company.location_city or '' }}"
        >
    </label>

    <!-- COUNTRY -->
    <label class="field-label">
        Country:
        <input
            type="text"
            id="country"
            name="country"
            value="{{ company.country or '' }}"
        >
    </label>

    <!-- INDUSTRIES -->
    <label class="field-label">
        Industries:

        {% set selected = (company.industries or "").split(", ") %}

        <div class="industry-options">
            {% for option in ["Technology", "Healthcare", "Finance", "Logistics", "Consulting"] %}
                <label class="industry-item">
                    <input
                        type="checkbox"
                        name="industries"
                        value="{{ option }}"
                       {% if option in selected %}checked{% endif %}
                    >
                    {{ option }}
            </label>
            {% endfor %}
        </div>
    </label>



    <hr>

    <h3>Contact information (shown when unlocked)</h3>

    <!-- EMAIL -->
    <label class="field-label">
        Email address:
        <input
            type="email"
            id="contact_email"
            name="contact_email"
            value="{{ company.contact_email or '' }}"
        >
    </label>

    <!-- PHONE -->
    <label class="field-label">
        Phone number:
        <input
            type="tel"
            id="phone_number"
            name="phone_number"
            value="{{ company.phone_number or '' }}"
        >
    </label>

    <hr>

    <button class="btn" type="submit">Save changes</button>
</form>

<!-- FIELD HELPER POPUP -->
<div id="field-helper" class="field-helper">
    <div class="field-helper-title">
        <span id="field-helper-label">Field guide</span>
    </div>
    <div id="field-helper-text" class="field-helper-text">
        Click a field to get instructions.
    </div>
</div>

<script>
(function () {
    const helperText = document.getElementById("field-helper-text");
    const helperLabel = document.getElementById("field-helper-label");

    function guide(label, text) {
        helperLabel.textContent = label;
        helperText.textContent = text;
    }

    function bind(fieldId, label, text) {
        const field = document.getElementById(fieldId);
        if (!field) return;
        field.addEventListener("focus", () => guide(label, text));
    }

    bind("company_name", "Company name",
        "Use your official company or brand name. This is shown to consultants once they unlock your jobs.");

    bind("location_city", "City",
        "Enter the city where your main office or hiring location is.");

    bind("country", "Country",
        "Enter the country in which this office or hiring location is based. This helps consultants filter and match.");

    bind("contact_email", "Email address",
        "This email is shared with consultants after they unlock your job posts. Use an inbox that is actively monitored.");

    bind("phone_number", "Phone number",
        "A direct phone number can increase trust and response speed once you start collaborating, will be made available once you are unlocked by a consultant");
})();
</script>

{% endblock %}
