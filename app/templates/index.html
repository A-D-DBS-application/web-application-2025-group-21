{% extends "base.html" %}
{% block title %}{{ _("Home | IConsult") }}{% endblock %}

{% block content %}

<div class="home-hero">
    <h1>{{ _("IConsult") }}</h1>
    <p class="home-subtitle">
        {{ _("Het platform waar") }} <strong>{{ _("consultants") }}</strong> {{ _("en") }}
        <strong>{{ _("bedrijven") }}</strong> 
        {{ _("elkaar vinden via een slimme, transparante matchscore.") }}
    </p>

    <div class="home-cta-row">
        {% if session.get('user_id') %}
            {% if session.get('role') == 'company' %}
                <a href="{{ url_for('main.consultants_list') }}" class="home-btn primary">
                    {{ _("üëâ Zoek consultants") }}
                </a>
                <a href="{{ url_for('main.company_jobs_list') }}" class="home-btn secondary">
                    {{ _("Mijn vacatures") }}
                </a>
            {% elif session.get('role') == 'consultant' %}
                <a href="{{ url_for('main.jobs_list') }}" class="home-btn primary">
                    {{ _("üëâ Bekijk vacatures") }}
                </a>
                <a href="{{ url_for('main.dashboard') }}" class="home-btn secondary">
                    {{ _("Mijn profiel") }}
                </a>
            {% else %}
                <a href="{{ url_for('main.dashboard') }}" class="home-btn primary">
                    {{ _("üëâ Ga naar je dashboard") }}
                </a>
            {% endif %}
        {% else %}
            <a href="{{ url_for('main.login') }}" class="home-btn primary">
                {{ _("üëâ Log in om te starten") }}
            </a>
            <p class="home-small">
                {{ _("Nog geen account? Kies je rol op de loginpagina ‚Äì consultant of bedrijf.") }}
            </p>
        {% endif %}
    </div>
</div>

<div class="home-metrics">
    <div class="metric-card">
        <span class="metric-label">{{ _("Actieve vacatures") }}</span>
        <span class="metric-value">
            {% if latest_jobs %}
                {{ latest_jobs|length }}
            {% else %}
                10+
            {% endif %}
        </span>
        <span class="metric-hint">{{ _("Gericht op digitale & zakelijke profielen") }}</span>
    </div>

    <div class="metric-card">
        <span class="metric-label">{{ _("Beschikbare consultants") }}</span>
        <span class="metric-value">
            {% if latest_consultants %}
                {{ latest_consultants|length }}
            {% else %}
                20+
            {% endif %}
        </span>
        <span class="metric-hint">{{ _("Met duidelijke skill-profielen") }}</span>
    </div>

    <div class="metric-card">
        <span class="metric-label">{{ _("Matchmotor") }}</span>
        <span class="metric-value">IConsult</span>
        <span class="metric-hint">{{ _("Skills, tekst, recentheid & populariteit") }}</span>
    </div>
</div>

<div class="home-columns">
    {% if not session.get('user_id') %}
        <div class="home-column">
            <h2>{{ _("Voor bedrijven") }}</h2>
            <ul>
                <li>{{ _("Maak snel een vacature aan met vereiste skills.") }}</li>
                <li>{{ _("Ontvang een gesorteerde lijst consultants volgens matchscore.") }}</li>
                <li>{{ _("Unlock contactgegevens alleen wanneer het relevant is.") }}</li>
            </ul>
        </div>

        <div class="home-column">
            <h2>{{ _("Voor consultants") }}</h2>
            <ul>
                <li>{{ _("Vul je profiel en skills in voor betere matches.") }}</li>
                <li>{{ _("Ontdek vacatures die echt passen bij jouw expertise.") }}</li>
                <li>{{ _("Jij kiest wanneer je je gegevens vrijgeeft aan een bedrijf.") }}</li>
            </ul>
        </div>

    {% elif session.get('role') == 'company' %}
        <div class="home-column">
            <h2>{{ _("Voor bedrijven") }}</h2>
            <ul>
                <li>{{ _("Maak snel een vacature aan met vereiste skills.") }}</li>
                <li>{{ _("Ontvang een gesorteerde lijst consultants volgens matchscore.") }}</li>
                <li>{{ _("Unlock contactgegevens alleen wanneer het relevant is.") }}</li>
            </ul>
            <a href="{{ url_for('main.job_new') }}" class="home-link">
                {{ _("+ Nieuwe vacature aanmaken") }}
            </a>
        </div>

    {% elif session.get('role') == 'consultant' %}
        <div class="home-column">
            <h2>{{ _("Voor consultants") }}</h2>
            <ul>
                <li>{{ _("Vul je skills en specialisatie zo volledig mogelijk in.") }}</li>
                <li>{{ _("Ontdek vacatures die echt passen bij jouw expertise.") }}</li>
                <li>{{ _("Je kiest zelf wanneer je je gegevens vrijgeeft.") }}</li>
            </ul>
            <a href="{{ url_for('main.edit_consultant_profile') }}" class="home-link">
                {{ _("‚úèÔ∏è Werk mijn profiel bij") }}
            </a>
        </div>
    {% endif %}
</div>

{% if not session.get('user_id') %}
    {% if latest_jobs %}
    <section class="home-list-section">
        <h2>{{ _("Recent toegevoegde vacatures") }}</h2>
        <div class="home-list-grid">
            {% for job in latest_jobs %}
                <article class="mini-card">
                    <h3>
                        <a href="{{ url_for('main.job_detail', job_id=job.id) }}">
                            {{ job.title }}
                        </a>
                    </h3>
                    {% if job.company %}
                        <p class="mini-meta">{{ job.company.company_name_masked }}</p>
                    {% endif %}
                    <p class="mini-location">
                        {% if job.location_city or job.country %}
                            <i class="fas fa-map-marker-alt"></i>
                            {{ job.location_city }}{% if job.location_city and job.country %}, {% endif %}{{ job.country }}
                        {% else %}
                            &nbsp;
                        {% endif %}
                    </p>
                </article>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    {% if latest_consultants %}
    <section class="home-list-section">
        <h2>{{ _("Nieuwe consultants") }}</h2>
        <div class="home-list-grid">
            {% for c in latest_consultants %}
                <article class="mini-card">
                    <h3>
                        <a href="{{ url_for('main.consultant_detail', profile_id=c.id) }}">
                            {{ c.display_name or c.display_name_masked }}
                        </a>
                    </h3>
                    <p class="mini-meta">
                        {% if c.specialisation %}{{ c.specialisation }}{% endif %}
                    </p>
                    <p class="mini-location">
                        {% if c.location_city or c.country %}
                            <i class="fas fa-map-marker-alt"></i>
                            {{ c.location_city }}{% if c.location_city and c.country %}, {% endif %}{{ c.country }}
                        {% else %}
                            &nbsp;
                        {% endif %}
                    </p>
                </article>
            {% endfor %}
        </div>
    </section>
    {% endif %}
{% else %}

    {% if session.get('role') == 'company' and latest_consultants %}
    <section class="home-list-section">
        <h2>{{ _("Nieuwe consultants") }}</h2>
        <div class="home-list-grid">
            {% for c in latest_consultants %}
                <article class="mini-card">
                    <h3>
                        <a href="{{ url_for('main.consultant_detail', profile_id=c.id) }}">
                            {{ c.display_name or c.display_name_masked }}
                        </a>
                    </h3>
                    <p class="mini-meta">
                        {% if c.specialisation %}{{ c.specialisation }}{% endif %}
                    </p>
                    <p class="mini-location">
                        {% if c.location_city or c.country %}
                            <i class="fas fa-map-marker-alt"></i>
                            {{ c.location_city }}{% if c.location_city and c.country %}, {% endif %}{{ c.country }}
                        {% else %}
                            &nbsp;
                        {% endif %}
                    </p>
                </article>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    {% if session.get('role') == 'consultant' and latest_jobs %}
    <section class="home-list-section">
        <h2>{{ _("Recent toegevoegde vacatures") }}</h2>
        <div class="home-list-grid">
            {% for job in latest_jobs %}
                <article class="mini-card">
                    <h3>
                        <a href="{{ url_for('main.job_detail', job_id=job.id) }}">
                            {{ job.title }}
                        </a>
                    </h3>
                    {% if job.company %}
                        <p class="mini-meta">{{ job.company.company_name_masked }}</p>
                    {% endif %}
                    <p class="mini-location">
                        {% if job.location_city or job.country %}
                            <i class="fas fa-map-marker-alt"></i>
                            {{ job.location_city }}{% if job.location_city and job.country %}, {% endif %}{{ job.country }}
                        {% else %}
                            &nbsp;
                        {% endif %}
                    </p>
                </article>
            {% endfor %}
        </div>
    </section>
    {% endif %}
{% endif %}

{% if recent_unlocks %}
<section class="home-list-section">
    <h2>{{ _("Recent vrijgegeven profielen (geanonimiseerd)") }}</h2>
    <p class="home-muted">
        {{ _("Onderstaande items tonen enkel type en locatie. De echte contactgegevens zijn alleen zichtbaar voor de partij die het profiel heeft vrijgegeven.") }}
    </p>
    <div class="home-list-grid">
        {% for u in recent_unlocks %}
            <article class="mini-card blurred-card">
                <div class="blur-inner">
                    {% if u.kind == 'consultant' %}
                        <h3>{{ _("Consultant-profiel") }}</h3>
                        <p class="mini-meta">
                            {% if u.profile.specialisation %}
                                {{ u.profile.specialisation }}
                            {% else %}
                                {{ _("Consultant") }}
                            {% endif %}
                        </p>
                        <p class="mini-location">
                            {% if u.profile.location_city or u.profile.country %}
                                <i class="fas fa-map-marker-alt"></i>
                                {{ u.profile.location_city }}{% if u.profile.location_city and u.profile.country %}, {% endif %}{{ u.profile.country }}
                            {% else %}
                                {{ _("Locatie verborgen") }}
                            {% endif %}
                        </p>
                    {% elif u.kind == 'job' %}
                        <h3>{{ _("Vacature") }}</h3>
                        <p class="mini-meta">
                            {% if u.job.contract_type %}
                                {{ u.job.contract_type }}
                            {% else %}
                                {{ _("Job") }}
                            {% endif %}
                        </p>
                        <p class="mini-location">
                            {% if u.job.location_city or u.job.country %}
                                <i class="fas fa-map-marker-alt"></i>
                                {{ u.job.location_city }}{% if u.job.location_city and u.job.country %}, {% endif %}{{ u.job.country }}
                            {% else %}
                                {{ _("Locatie verborgen") }}
                            {% endif %}
                        </p>
                    {% endif %}
                    <p class="mini-date">
                        {% if u.created_at_str %}{{ _("Vrijgegeven op") }} {{ u.created_at_str }}{% endif %}
                    </p>
                </div>
                <div class="blur-overlay">
                    {{ _("üîí Details enkel zichtbaar voor de koper") }}
                </div>
            </article>
        {% endfor %}
    </div>
</section>
{% endif %}

<section class="home-explainer">
    <h2>{{ _("Hoe werkt de IConsult-matchscore?") }}</h2>
    <div class="home-explainer-grid">

        <div>
            <h3>{{ _("Wat we meenemen in de score") }}</h3>
            <ul>
                <li><strong>{{ _("Skills") }}</strong> ‚Äì {{ _("hoe beter de gevraagde en aangeboden vaardigheden overeenkomen, hoe hoger de score.") }}</li>
                <li><strong>{{ _("Zoekterm") }}</strong> ‚Äì {{ _("indien u een zoekterm ingeeft, kijken we of die voorkomt in titel, samenvatting of beschrijving.") }}</li>
                <li><strong>{{ _("Recentheid") }}</strong> ‚Äì {{ _("recent toegevoegde of ge√ºpdatete profielen en vacatures krijgen een lichte boost.") }}</li>
                <li><strong>{{ _("Populariteit") }}</strong> ‚Äì {{ _("profielen en vacatures die vaker worden geunlockt, scoren iets hoger.") }}</li>
            </ul>
        </div>

        <div class="home-tips">
            {% if not session.get('user_id') %}
                <p><strong>{{ _("Voor bedrijven:") }}</strong></p>
                <ul>
                    <li>{{ _("Voeg duidelijke skills toe aan elke vacature.") }}</li>
                    <li>{{ _("Gebruik concrete termen in de titel en omschrijving.") }}</li>
                </ul>

                <p><strong>{{ _("Voor consultants:") }}</strong></p>
                <ul>
                    <li>{{ _("Vul je skills en specialisatie zo volledig mogelijk in.") }}</li>
                    <li>{{ _("Hou je profiel up-to-date, vooral bij nieuwe opdrachten.") }}</li>
                </ul>

            {% elif session.get('role') == 'company' %}
                <p><strong>{{ _("Optimaliseer als bedrijf:") }}</strong></p>
                <ul>
                    <li>{{ _("Definieer 3‚Äì7 kernskills per vacature voor een scherpere match.") }}</li>
                    <li>{{ _("Gebruik herkenbare functietitels en vermijd interne jargon.") }}</li>
                    <li>{{ _("Werk vacatures bij als requirements wijzigen, zodat de recentheidsscore behouden blijft.") }}</li>
                </ul>

            {% elif session.get('role') == 'consultant' %}
                <p><strong>{{ _("Optimaliseer als consultant:") }}</strong></p>
                <ul>
                    <li>{{ _("Vul al je relevante skills in en update ze na elke opdracht.") }}</li>
                    <li>{{ _("Zorg dat je titel en korte bio je kernexpertise helder verwoorden.") }}</li>
                    <li>{{ _("Blijf actief: recent bijgewerkte profielen worden iets hoger gerankt.") }}</li>
                </ul>
            {% endif %}
        </div>

    </div>
</section>

{% endblock %}
