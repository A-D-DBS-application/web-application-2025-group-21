{% extends "base.html" %}
{% block title %}Create New Job Post{% endblock %}

{% block content %}
<h1 class="page-title">Post a New Job</h1>

<div class="form-card">
    <form method="POST" action="{{ url_for('main.job_new') }}" class="job-edit-form">

        <label class="field-label">
            <strong>Job Title</strong>
            <input
                type="text"
                id="title"
                name="title"
                required
                value="{{ request.form.get('title', '') }}">
        </label>

        <label class="field-label">
            <strong>Description</strong>
            <textarea
                id="description"
                name="description"
                rows="6"
                required>{{ request.form.get('description', '') }}</textarea>
        </label>

        <div class="job-form-row">
            <label class="field-label">
                <strong>City</strong>
                <input
                    type="text"
                    id="location_city"
                    name="location_city"
                    value="{{ request.form.get('location_city', '') }}">
            </label>

            <label class="field-label">
                <strong>Country</strong>
                <input
                    type="text"
                    id="country"
                    name="country"
                    value="{{ request.form.get('country', '') }}">
            </label>
        </div>

        <label class="field-label">
            <strong>Contract Type</strong>
            <select id="contract_type" name="contract_type">
                <option value="Freelance"
                    {% if request.form.get('contract_type') == 'Freelance' or not request.form.get('contract_type') %}selected{% endif %}>
                    Freelance
                </option>
                <option value="Full-time"
                    {% if request.form.get('contract_type') == 'Full-time' %}selected{% endif %}>
                    Full-time
                </option>
                <option value="Part-time"
                    {% if request.form.get('contract_type') == 'Part-time' %}selected{% endif %}>
                    Part-time
                </option>
                <option value="Project-based"
                    {% if request.form.get('contract_type') == 'Project-based' %}selected{% endif %}>
                    Project-based
                </option>
            </select>
        </label>

        <h3 class="section-title">Required Skills</h3>
        <p class="form-instruction">
            Select all skills required for this job.
        </p>

        {% set selected_skills = request.form.getlist('skills') | map('int') | list %}

        <div class="skills-box">
            {% for skill in skills %}
                <label class="skill-checkbox">
                    <input
                        type="checkbox"
                        name="skills"
                        value="{{ skill.id }}"
                        {% if skill.id in selected_skills %}checked{% endif %}>
                    {{ skill.name }}
                </label>
            {% endfor %}
        </div>

        <button type="submit" class="btn-primary" style="margin-top: 16px;">
            Post Job
        </button>
    </form>
</div>
{% endblock %}
